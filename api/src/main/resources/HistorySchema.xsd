<?xml version="1.0" encoding="UTF-8"?>
<schema targetNamespace="http://www.softwareneedsyou.org/HistorySchema" elementFormDefault="qualified" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:hst="http://www.softwareneedsyou.org/HistorySchema">

    <simpleType name="stringCollaspe">
        <annotation>
        	<documentation>String with "Collapse Whitespace" restriction</documentation>
        </annotation>
        <restriction base="string">
    		<whiteSpace value="collapse"></whiteSpace>
    	</restriction>
    </simpleType>

    <simpleType name="stringNoEmpty">
        <annotation>
        	<documentation>Chaine de caract√®re non vide</documentation>
        </annotation>
        <restriction base="hst:stringCollaspe">
    		<minLength value="1"></minLength>
    	</restriction>
    </simpleType>

    <complexType name="Content" abstract="true">
    	<attribute name="type" use="required">
    		<simpleType>
    			<restriction base="hst:stringNoEmpty">
    				<enumeration value="text"></enumeration>
    				<enumeration value="file"></enumeration>
    			</restriction>
    		</simpleType>
    	</attribute>
    </complexType>

    <complexType name="Test">
    	<annotation>
    		<documentation>
    			Description d'un test contenu dans le fichier
    		</documentation>
    	</annotation>
    	<attribute name="id" type="short" use="required"></attribute>
    	<attribute name="name" type="hst:stringNoEmpty"
    		use="required">
    	</attribute>
    	<attribute name="resume" type="hst:stringNoEmpty" use="optional"></attribute>
    </complexType>

    <complexType name="Level" abstract="true">
    	<annotation>
    		<documentation>Niveau d'une histoire</documentation>
    	</annotation>
    	<all>
    		<element name="description" type="hst:Content" maxOccurs="1"
    			minOccurs="1">
    		</element>
    		<element name="resume" type="hst:Content" maxOccurs="1"
    			minOccurs="0">
    			<annotation>
    				<documentation>
    					Courte description du niveau
    				</documentation>
    			</annotation>
    		</element>
    		<element name="tests" minOccurs="1" maxOccurs="1">
    			<complexType>
    				<sequence>
    					<element name="test" type="hst:Test" minOccurs="0" maxOccurs="unbounded"></element>
    				</sequence>
    				<attribute name="file" type="hst:stringNoEmpty"></attribute>
    			</complexType>
    		</element>
    	</all>
    	<attribute name="name" type="hst:stringNoEmpty"
    		use="required">
    		<annotation>
    			<documentation>Titre du niveau</documentation>
    		</annotation>
    	</attribute>
    </complexType>

    <element name="history">
    	<complexType>
    		<all maxOccurs="1" minOccurs="1">
    			<element name="title" type="hst:stringNoEmpty"
    				maxOccurs="1" minOccurs="1">
    				<annotation>
    					<documentation>Titre du plugin</documentation>
    				</annotation>
    			</element>
    			<element name="description" type="hst:Content"
    				maxOccurs="1" minOccurs="0">
    				<annotation>
    					<documentation>
    						Description de l'histoire
    					</documentation>
    				</annotation>
    			</element>
    			<element name="levels" maxOccurs="1" minOccurs="1">
    				<annotation>
    					<documentation>
    						Liste des niveaux composant l'histoire
    					</documentation>
    				</annotation>
    				<complexType>
    					<sequence>
    						<element name="level" type="hst:Level"
    							maxOccurs="unbounded" minOccurs="1">
    						</element>
    					</sequence>
    				</complexType>
    			</element>
    		</all>
    		<attribute name="compiler" type="hst:stringNoEmpty" use="required">
    			<annotation>
    				<documentation>UUID du compilateur compatible</documentation>
    			</annotation></attribute>
    	</complexType>
    </element>
</schema>
